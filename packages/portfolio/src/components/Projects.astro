---
import projects from "../data/projects";
---

<section id="projects" class="projects">
  <div class="container">
    <div class="section-header">
      <h2>My Projects</h2>
      <div class="underline"></div>
    </div>
    <div class="project-filters">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="frontend">Frontend</button>
      <button class="filter-btn" data-filter="fullstack">Full Stack</button>
      <button class="filter-btn" data-filter="backend">Backend</button>
    </div>
    <div class="projects-grid">
      {
        projects.map((project, idx) => (
          <div
            class="project-card"
            data-category={project.category}
            key={idx}
            id={project.id || undefined}
          >
            <div class="project-img">
              <img
                src={project.image}
                height="300"
                width="500"
                alt={project.alt}
              />
            </div>
            <div class="project-info">
              <h3>{project.title}</h3>
              <p>{project.description}</p>
              <div class="project-tech">
                {project.tech.map((t) => (
                  <span>{t}</span>
                ))}
              </div>
              <div class="project-links">
                <a href={project.demo} target="_blank" class="btn small-btn">
                  View Demo
                </a>
                <a
                  href={project.github}
                  target="_blank"
                  class="btn small-btn secondary-btn"
                >
                  GitHub
                </a>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
  <script type="module" client:visible>
    const filterBtns = document.querySelectorAll(".filter-btn");
    const projectCards = document.querySelectorAll(".project-card");
    filterBtns.forEach((btn) => {
      btn.addEventListener("click", () => {
        filterBtns.forEach((btn) => btn.classList.remove("active"));
        btn.classList.add("active");
        const filter = btn.getAttribute("data-filter");
        projectCards.forEach((card) => {
          if (
            filter === "all" ||
            card.getAttribute("data-category") === filter
          ) {
            card.style.display = "block";
          } else {
            card.style.display = "none";
          }
        });
      });
    });
  </script>
</section>
